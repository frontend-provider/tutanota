!function(){"use strict";c.SKIP={},c.lift=function(){var t=arguments[0];return r(Array.prototype.slice.call(arguments,1)).map(function(n){return t.apply(void 0,n)})},c.scan=function(e,r,n){var t=n.map(function(n){var t=e(r,n);return t!==c.SKIP&&(r=t),t});return t(r),t},c.merge=r,c.combine=e,c.scanMerge=function(r,a){var n=r.map(function(n){return n[0]}),t=e(function(){var e=arguments[arguments.length-1];return n.forEach(function(n,t){-1<e.indexOf(n)&&(a=r[t][1](a,n()))}),a},n);return t(a),t},c["fantasy-land/of"]=c;var n=!1;function c(r){var n,a=[],o=[];function u(n){return arguments.length&&n!==c.SKIP&&t(u)&&(r=n,u.changing(),u.state="active",a.forEach(function(n,t){n(o[t](r))})),r}return u.constructor=c,u.state=arguments.length&&r!==c.SKIP?"active":"pending",u.changing=function(){t(u)&&(u.state="changing"),a.forEach(function(n){n.dependent&&n.dependent.changing(),n.changing()})},u.map=function(n,t){var e="active"===u.state&&t!==c.SKIP?c(n(r)):c();return a.push(e),o.push(n),e},u.toJSON=function(){return null!=r&&"function"==typeof r.toJSON?r.toJSON():r},u["fantasy-land/map"]=u.map,u["fantasy-land/ap"]=function(n){return e(function(n,t){return n()(t())},[n,u])},Object.defineProperty(u,"end",{get:function(){return n||((n=c()).map(function(n){return!0===n&&(u.state="ended",a.length=o.length=0),n}),n)}}),u}function e(e,r){var a=r.every(function(n){if(n.constructor!==c)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return"active"===n.state}),o=a?c(e.apply(null,r.concat([r]))):c(),u=[];return r.forEach(function(t){t.map(function(n){return u.push(t),(a||r.every(function(n){return"pending"!==n.state}))&&(a=!0,o(e.apply(null,r.concat([u]))),u=[]),n},c.SKIP).parent=o}),o}function r(n){return e(function(){return n.map(function(n){return n()})},n)}function t(n){return"pending"===n.state||"active"===n.state||"changing"===n.state}Object.defineProperty(c,"HALT",{get:function(){return n&&console.log("HALT is deprecated and has been renamed to SKIP"),n=!0,c.SKIP}}),"undefined"!=typeof module?module.exports=c:"function"!=typeof window.m||"stream"in window.m?window.m={stream:c}:window.m.stream=c}();