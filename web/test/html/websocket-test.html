<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Websocket-Test</title>
<!-- begin dev section -->
	<script type="text/javascript" src="/libs/jquery-1.7.2.js"></script>
	<script type="text/javascript" src="/libs/crypto-sjcl-2012-08-09.js"></script>
	<script type="text/javascript" src="/libs/crypto-jsbn-2012-08-09.js"></script>
	<script type="text/javascript" src="/js/crypto/bCrypt.js"></script>
	<script type="text/javascript" src="/libs/closure-library-base-2012-01-19.js"></script> <!-- Base.js must be included statically -->

<!-- begin js section -->
<script type="text/javascript" src="js/Base.js"></script>
<script type="text/javascript" src="js/util/EncodingConverter.js"></script>
<script type="text/javascript" src="generated/entity/sys/Authentication.js"></script>
<script type="text/javascript" src="generated/entity/sys/WebsocketWrapper.js"></script>
<script type="text/javascript" src="generated/entity/sys/Chat.js"></script>
	<script type="text/javascript" src="generated/entity/sys/Customer.js"></script>
	<script type="text/javascript" src="generated/entity/sys/CustomerService.js"></script>
	<script type="text/javascript" src="generated/entity/sys/Group.js"></script>
	<script type="text/javascript" src="generated/entity/sys/GroupMembership.js"></script>
	<script type="text/javascript" src="generated/entity/sys/KeyPair.js"></script>
	<script type="text/javascript" src="generated/entity/sys/Permission.js"></script>
	<script type="text/javascript" src="generated/entity/sys/PublicKeyService.js"></script>
	<script type="text/javascript" src="generated/entity/sys/RootInstance.js"></script>
	<script type="text/javascript" src="generated/entity/sys/SaltService.js"></script>
	<script type="text/javascript" src="generated/entity/sys/SystemKeysService.js"></script>
	<script type="text/javascript" src="generated/entity/sys/UpdatePermissionKeyService.js"></script>
	<script type="text/javascript" src="generated/entity/sys/User.js"></script>
	<script type="text/javascript" src="generated/entity/sys/UserIdService.js"></script>
	<script type="text/javascript" src="generated/entity/sys/UserService.js"></script>
	<script type="text/javascript" src="/js/crypto/AesWorkerProxy.js"></script>
	<script type="text/javascript" src="/js/crypto/SjclAes.js"></script>
	<script type="text/javascript" src="/js/crypto/SjclRandomizer.js"></script>
	<script type="text/javascript" src="/js/crypto/SjclSha256.js"></script>
	<script type="text/javascript" src="/js/crypto/RsaWorkerProxy.js"></script>
	<script type="text/javascript" src="/js/crypto/JBCryptAdapter.js"></script>
	<script type="text/javascript" src="/js/crypto/JsbnRsa.js"></script>
	<script type="text/javascript" src="/js/crypto/Oaep.js"></script>
	<script type="text/javascript" src="/js/ctrl/UserController.js"></script>
	<script type="text/javascript" src="/js/Locator.js"></script>
	<script type="text/javascript" src="/js/entity/EntityHelper.js"></script>
	<script type="text/javascript" src="/js/event/EventBusClient.js"></script>
	<script type="text/javascript" src="/js/event/Observable.js"></script>
	<script type="text/javascript" src="/js/event/ListEventTracker.js"></script>
	<script type="text/javascript" src="/js/event/PollingListEventTracker.js"></script>
	<script type="text/javascript" src="js/rest/EntityRestCache.js"></script>
	<script type="text/javascript" src="js/rest/EntityRestClient.js"></script>
	<script type="text/javascript" src="js/rest/EntityRestDummy.js"></script>
	<script type="text/javascript" src="js/rest/EntityRestException.js"></script>
	<script type="text/javascript" src="js/rest/EntityRestInterface.js"></script>
	<script type="text/javascript" src="js/rest/ResourceConstants.js"></script>
	<script type="text/javascript" src="js/rest/RestClient.js"></script>
	<script type="text/javascript" src="js/rest/RestException.js"></script>
<!-- end js section -->

<!-- end dev section -->

<script type="text/javascript">
	$(document).ready(function() {
		sjcl.random = new sjcl.random();
		tutao['locator'] = new tutao.Locator({
			randomizer: tutao.crypto.SjclRandomizer,
			aesCrypter: tutao.crypto.AesWorkerProxy,
			rsaUtil: tutao.crypto.RsaWorkerProxy,
			kdfCrypter: tutao.crypto.JBCryptAdapter,
			shaCrypter: tutao.crypto.SjclSha256,
			userController: tutao.ctrl.UserController,
            // @type {tutao.rest.RestClient}
			restClient: tutao.rest.RestClient,
			entityRestClient: tutao.rest.EntityRestClient});
		
		tutao.locator.userController.loginUser("moritz@tutanota.de", "whatAwondErfulPasspHRase", function(exception) {
			console.log("logged in: ", exception);
		});
	});
	
	// TODO authenticate user and use EventBus
</script>

</head>
<body>
	test websockets from js console!
</body>
</html>